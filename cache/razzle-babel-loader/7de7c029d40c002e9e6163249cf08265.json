{"ast":null,"code":"var _jsxFileName = \"/home/ab/Code/reactJs/razzel/src/views/home/index.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport \"./css/style.scoped.css\";\nimport React, { Component } from \"react\";\nimport Cards from \"components/_Crads\";\nimport Discover from \"components/_Discovery\";\nimport Newsongs from \"components/Newsong/index\";\nimport Trend from \"components/Trending/Trending\";\nimport Topsongs from \"components/Topsongs\";\nimport TopArtis from \"components/TopArtis\";\nimport Options from \"components/OpsiBellow\";\nimport Slider from \"views/Coursel\";\nimport { connect } from \"react-redux\";\nimport { logout } from \"redux/actions/users\";\nimport { bindActionCreators } from \"redux\";\nimport { OptionsContext } from \"helpers/contex\";\nimport api from \"helpers/api\";\nimport Loader from \"components/loaderCards/LoaderCards\";\nimport HelmetMeta from \"views/Helmet\";\nimport logs from \"helpers/logs\";\n\nclass Index extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"togelClass\", () => {\n      this.setState({\n        sideShow: !this.state.sideShow\n      });\n    });\n\n    _defineProperty(this, \"getPage\", () => {\n      const apis = new api(this.props.tokens);\n      return new Promise((resolve, reject) => {\n        apis.req({\n          method: \"GET\",\n          url: \"music/discovery?page=1&per_page=1\"\n        }).then(res => {\n          const {\n            pagination\n          } = res.data.meta;\n          resolve(pagination.total_page);\n        }).catch(er => {\n          reject(new Error(\"Failed get pagination\"));\n        });\n      });\n    });\n\n    _defineProperty(this, \"getDiscovery\", paginate => {\n      const apis = new api(this.props.tokens);\n      return new Promise((resolve, reject) => {\n        apis.req({\n          method: \"GET\",\n          url: `music/discovery?page=1&per_page=${paginate}&order[id]=ASC`\n        }).then(res => {\n          const {\n            data\n          } = res.data;\n          resolve(data);\n        }).catch(er => {\n          reject(er.response);\n        });\n      });\n    });\n\n    _defineProperty(this, \"veriVyToken\", () => {\n      const apis = new api(this.props.tokens);\n      return new Promise((resolve, reject) => {\n        apis.req({\n          method: \"GET\",\n          url: `auth?include=personal,label,role&page=1&per_page=5`\n        }).then(() => {\n          resolve(true);\n        }).catch(er => {\n          if (er.response) {\n            // console.log(er.response.data.message)\n            if (er.response.data.message === \"Token yang diberikan telah habis masa kadaluarsa\") {\n              this.props.unsetAuth();\n            }\n          }\n\n          reject(false);\n        });\n      });\n    });\n\n    _defineProperty(this, \"CardsPlay\", (id, refsPlay, refsHov, songs) => {\n      const numb = this.state.angka + 1;\n\n      if (id !== this.state.theId) {\n        this.setState({\n          curentRefHov: refsHov,\n          curentRefPlay: refsPlay,\n          theId: id,\n          angka: numb\n        });\n        this.context.setTheSongs(songs);\n      } else {\n        this.setState({\n          theId: 0,\n          angka: numb\n        });\n        this.context.setTheSongs(songs);\n      }\n    });\n\n    this.state = {\n      Data: [],\n      count: 24,\n      sideShow: false,\n      isActive: false,\n      IsOutisde: false,\n      theId: 0,\n      curentRefPlay: \"\",\n      curentRefHov: \"\",\n      angka: 0,\n      isLoad: false\n    };\n    this.currentPathname = null;\n    this.logger = new logs(false, \"home\");\n  }\n\n  componentWillUnmount() {\n    this.context.setTheme(\"bg-black\", true);\n  }\n\n  async componentDidMount() {\n    try {\n      this.setState({\n        isLoad: true\n      });\n      const page = await this.getPage();\n      const data = await this.getDiscovery(page);\n      this.setState({\n        Data: data,\n        isLoad: false\n      });\n      await this.veriVyToken();\n    } catch (error) {\n      // this.logger(error.response)\n      new logs(true, \"home\").Show(error);\n    }\n  }\n\n  render() {\n    return __jsx(\"section\", {\n      className: \"scrollable padder-lg w-f-md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, __jsx(HelmetMeta, {\n      title: \"Musicfly - Listen free music\",\n      desc: \"Discovery our music maybe you will find your type and listen for it. your happy is our happiness\",\n      img: \"https://res.cloudinary.com/devops2/image/upload/v1618237589/musicfly/logo_ekro0x.png\",\n      imgalt: \"muscifly-logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }), __jsx(Slider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      className: \"dicover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, __jsx(Discover, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    })), __jsx(\"div\", {\n      className: \"row row-sm cards-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, this.state.isLoad ? Array(this.state.count).fill().map((_, index) => {\n      return __jsx(Loader, {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 42\n        }\n      });\n    }) : this.state.Data.map(value => {\n      const data = {\n        id: value.id,\n        uuid: value.discovery_code,\n        name: value.music_title,\n        code: value.music_code,\n        artisCod: value.artis_code,\n        singer: value.artis_complete_name,\n        cover: value.music_image_priority,\n        duration: value.music_duration,\n        musicSrc: value.music_storage_path\n      };\n      return __jsx(Cards, {\n        key: data.id,\n        idx: data.id,\n        name: data.name,\n        code: data.code,\n        artiscod: data.artisCod,\n        cover: data.cover,\n        singer: data.singer,\n        duration: data.duration,\n        loved: value.love_id,\n        songs: data,\n        isActive: this.state.isActive,\n        playCard: this.CardsPlay,\n        history: this.props.history,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 35\n        }\n      });\n    })), __jsx(Newsongs, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, __jsx(Trend, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }\n    }), __jsx(Topsongs, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }\n    }), __jsx(TopArtis, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }\n    })), __jsx(Options, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\n_defineProperty(Index, \"contextType\", OptionsContext);\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    unsetAuth: bindActionCreators(logout, dispatch)\n  };\n};\n\nconst mapStateToProps = state => {\n  return {\n    users: state.users,\n    tokens: state.users.token,\n    isAuth: state.users.isAuth\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":{"version":3,"sources":["/home/ab/Code/reactJs/razzel/src/views/home/index.js"],"names":["React","Component","Cards","Discover","Newsongs","Trend","Topsongs","TopArtis","Options","Slider","connect","logout","bindActionCreators","OptionsContext","api","Loader","HelmetMeta","logs","Index","constructor","props","setState","sideShow","state","apis","tokens","Promise","resolve","reject","req","method","url","then","res","pagination","data","meta","total_page","catch","er","Error","paginate","response","message","unsetAuth","id","refsPlay","refsHov","songs","numb","angka","theId","curentRefHov","curentRefPlay","context","setTheSongs","Data","count","isActive","IsOutisde","isLoad","currentPathname","logger","componentWillUnmount","setTheme","componentDidMount","page","getPage","getDiscovery","veriVyToken","error","Show","render","Array","fill","map","_","index","value","uuid","discovery_code","name","music_title","code","music_code","artisCod","artis_code","singer","artis_complete_name","cover","music_image_priority","duration","music_duration","musicSrc","music_storage_path","love_id","CardsPlay","history","mapDispatchToProps","dispatch","mapStateToProps","users","token","isAuth"],"mappings":"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","sourcesContent":["import \"./css/style.scoped.css\"\nimport React, { Component } from \"react\"\nimport Cards from \"components/_Crads\"\nimport Discover from \"components/_Discovery\"\nimport Newsongs from \"components/Newsong/index\"\nimport Trend from \"components/Trending/Trending\"\nimport Topsongs from \"components/Topsongs\"\nimport TopArtis from \"components/TopArtis\"\nimport Options from \"components/OpsiBellow\"\nimport Slider from \"views/Coursel\"\nimport { connect } from \"react-redux\"\nimport { logout } from \"redux/actions/users\"\nimport { bindActionCreators } from \"redux\"\nimport { OptionsContext } from \"helpers/contex\"\nimport api from \"helpers/api\"\nimport Loader from \"components/loaderCards/LoaderCards\"\nimport HelmetMeta from \"views/Helmet\"\nimport logs from \"helpers/logs\"\n\nclass Index extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            Data: [],\n            count: 24,\n            sideShow: false,\n            isActive: false,\n            IsOutisde: false,\n            theId: 0,\n            curentRefPlay: \"\",\n            curentRefHov: \"\",\n            angka: 0,\n            isLoad: false,\n        }\n        this.currentPathname = null\n        this.logger = new logs(false, \"home\")\n    }\n\n    static contextType = OptionsContext\n\n    componentWillUnmount() {\n        this.context.setTheme(\"bg-black\", true)\n    }\n\n    togelClass = () => {\n        this.setState({\n            sideShow: !this.state.sideShow,\n        })\n    }\n\n    getPage = () => {\n        const apis = new api(this.props.tokens)\n        return new Promise((resolve, reject) => {\n            apis.req({\n                method: \"GET\",\n                url: \"music/discovery?page=1&per_page=1\",\n            })\n                .then((res) => {\n                    const { pagination } = res.data.meta\n                    resolve(pagination.total_page)\n                })\n                .catch((er) => {\n                    reject(new Error(\"Failed get pagination\"))\n                })\n        })\n    }\n\n    getDiscovery = (paginate) => {\n        const apis = new api(this.props.tokens)\n        return new Promise((resolve, reject) => {\n            apis.req({\n                method: \"GET\",\n                url: `music/discovery?page=1&per_page=${paginate}&order[id]=ASC`,\n            })\n                .then((res) => {\n                    const { data } = res.data\n                    resolve(data)\n                })\n                .catch((er) => {\n                    reject(er.response)\n                })\n        })\n    }\n\n    veriVyToken = () => {\n        const apis = new api(this.props.tokens)\n        return new Promise((resolve, reject) => {\n            apis.req({\n                method: \"GET\",\n                url: `auth?include=personal,label,role&page=1&per_page=5`,\n            })\n                .then(() => {\n                    resolve(true)\n                })\n                .catch((er) => {\n                    if (er.response) {\n                        // console.log(er.response.data.message)\n                        if (\n                            er.response.data.message ===\n                            \"Token yang diberikan telah habis masa kadaluarsa\"\n                        ) {\n                            this.props.unsetAuth()\n                        }\n                    }\n                    reject(false)\n                })\n        })\n    }\n\n    async componentDidMount() {\n        try {\n            this.setState({ isLoad: true })\n            const page = await this.getPage()\n            const data = await this.getDiscovery(page)\n            this.setState({ Data: data, isLoad: false })\n            await this.veriVyToken()\n        } catch (error) {\n            // this.logger(error.response)\n            new logs(true, \"home\").Show(error)\n        }\n    }\n\n    CardsPlay = (id, refsPlay, refsHov, songs) => {\n        const numb = this.state.angka + 1\n        if (id !== this.state.theId) {\n            this.setState({\n                curentRefHov: refsHov,\n                curentRefPlay: refsPlay,\n                theId: id,\n                angka: numb,\n            })\n            this.context.setTheSongs(songs)\n        } else {\n            this.setState({ theId: 0, angka: numb })\n            this.context.setTheSongs(songs)\n        }\n    }\n\n    render() {\n        return (\n            <section className=\"scrollable padder-lg w-f-md\">\n                <HelmetMeta\n                    title=\"Musicfly - Listen free music\"\n                    desc=\"Discovery our music maybe you will find your type and listen for it. your happy is our happiness\"\n                    img=\"https://res.cloudinary.com/devops2/image/upload/v1618237589/musicfly/logo_ekro0x.png\"\n                    imgalt=\"muscifly-logo\"\n                />\n                <Slider />\n                <div className=\"dicover\">\n                    <Discover />\n                </div>\n                <div className=\"row row-sm cards-container\">\n                    {this.state.isLoad\n                        ? Array(this.state.count)\n                              .fill()\n                              .map((_, index) => {\n                                  return <Loader key={index} />\n                              })\n                        : this.state.Data.map((value) => {\n                              const data = {\n                                  id: value.id,\n                                  uuid: value.discovery_code,\n                                  name: value.music_title,\n                                  code: value.music_code,\n                                  artisCod: value.artis_code,\n                                  singer: value.artis_complete_name,\n                                  cover: value.music_image_priority,\n                                  duration: value.music_duration,\n                                  musicSrc: value.music_storage_path,\n                              }\n                              return (\n                                  <Cards\n                                      key={data.id}\n                                      idx={data.id}\n                                      name={data.name}\n                                      code={data.code}\n                                      artiscod={data.artisCod}\n                                      cover={data.cover}\n                                      singer={data.singer}\n                                      duration={data.duration}\n                                      loved={value.love_id}\n                                      songs={data}\n                                      isActive={this.state.isActive}\n                                      playCard={this.CardsPlay}\n                                      history={this.props.history}\n                                  />\n                              )\n                          })}\n                </div>\n                <Newsongs />\n                <div className=\"row\">\n                    <Trend />\n                    <Topsongs />\n                    <TopArtis />\n                </div>\n                <Options />\n            </section>\n        )\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        unsetAuth: bindActionCreators(logout, dispatch),\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        users: state.users,\n        tokens: state.users.token,\n        isAuth: state.users.isAuth,\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index)\n"]},"metadata":{},"sourceType":"module"}