{"ast":null,"code":"var __jsx = React.createElement;\nimport \"./scss/style.scoped.scss\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { useToasts } from \"react-toast-notifications\";\nimport api from \"helpers/api\";\nimport Notify from \"components/NotifMsg/NotifyMsg\";\n\nfunction ModalNotfi(props) {\n  var isOpen = props.open ? \"show\" : \"hide\";\n  var doRequest = new api(props.tokens).req;\n\n  var _useToasts = useToasts(),\n      addToast = _useToasts.addToast;\n\n  var _useState = useState(false),\n      isReadNotif = _useState[0],\n      setIsReadNotif = _useState[1];\n\n  var _useState2 = useState(0),\n      ReadNotifId = _useState2[0],\n      setReadNotifId = _useState2[1];\n\n  var _useState3 = useState([]),\n      notifMessage = _useState3[0],\n      setNotifMessage = _useState3[1];\n\n  var _useState4 = useState([]),\n      newNotif = _useState4[0],\n      setNewNotif = _useState4[1];\n\n  useEffect(function () {\n    if (props.open) {\n      getMessageNotif();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [props.open]);\n\n  var getMessageNotif = function getMessageNotif() {\n    doRequest({\n      method: \"GET\",\n      url: \"notif?page=1&per_page=5&order[id_notif]=DESC\"\n    }).then(function (res) {\n      var data = res.data.data;\n      var newMsg = data.filter(function (val) {\n        return val.is_read_notif !== \"1\";\n      });\n      setNewNotif(newMsg);\n      setNotifMessage(data);\n    })[\"catch\"](function (er) {\n      addToast(\"Something happen with notif\", {\n        appearance: \"error\"\n      });\n    });\n  };\n\n  var onReadNotif = function onReadNotif(id) {\n    setIsReadNotif(true);\n    setReadNotifId(id);\n  };\n\n  var onDeleteNotif = function onDeleteNotif() {\n    setIsReadNotif(false);\n    doRequest({\n      method: \"DELETE\",\n      url: \"notif\",\n      data: {\n        id: ReadNotifId\n      }\n    }).then(function () {\n      getMessageNotif();\n    })[\"catch\"](function (er) {\n      addToast(\"Something happen with notif\", {\n        appearance: \"error\"\n      });\n    });\n  };\n\n  var notReadNotif = function notReadNotif() {\n    setIsReadNotif(false);\n    doRequest({\n      method: \"PUT\",\n      url: \"notif\",\n      data: {\n        id: ReadNotifId\n      }\n    }).then(function () {\n      getMessageNotif();\n    })[\"catch\"](function (er) {\n      addToast(\"Something happen with notif\", {\n        appearance: \"error\"\n      });\n    });\n  };\n\n  var toggle = function toggle() {\n    props.toggleModal();\n  };\n\n  return __jsx(\"div\", {\n    className: \"container \".concat(isOpen)\n  }, __jsx(\"div\", {\n    className: \"modal-cos\"\n  }, __jsx(\"section\", {\n    className: \"panel bg-white\"\n  }, __jsx(\"div\", {\n    className: \"header-modal panel-heading b-light bg-light\"\n  }, __jsx(\"div\", {\n    className: \"btn-close\",\n    onClick: toggle\n  }, __jsx(\"i\", {\n    className: \"icon-close\"\n  })), __jsx(\"div\", {\n    className: \"judul\"\n  }, __jsx(\"span\", {\n    className: \"hidden-nav-xs padder m-t m-b-sm text-judul\"\n  }, newNotif.length > 0 ? __jsx(\"strong\", null, \"You have \", __jsx(\"span\", {\n    className: \"count\"\n  }, newNotif.length), \" \", \"notifications\") : __jsx(\"strong\", null, \"notifications\")))), __jsx(\"div\", {\n    className: \"list-group list-group-alt listcon\"\n  }, notifMessage.map(function (val) {\n    var haveReading = val.is_read_notif === \"1\";\n    return __jsx(Notify, {\n      key: val.id_notif,\n      id: val.id_notif,\n      title: val.title_notif,\n      time: val.send_notif,\n      haveread: haveReading,\n      message: val.text_1_notif,\n      isRead: isReadNotif,\n      readId: ReadNotifId,\n      reading: onReadNotif\n    });\n  })), __jsx(\"div\", {\n    className: \"panel-footer text-sm foot \".concat(isReadNotif ? \"\" : \"hide\")\n  }, __jsx(Link, {\n    to: \"#\",\n    className: \"pull-left\",\n    onClick: onDeleteNotif\n  }, __jsx(\"i\", {\n    className: \"icon-trash m-r-xs\"\n  }), __jsx(\"small\", {\n    className: \"text-muted\"\n  }, \"Delet\")), __jsx(Link, {\n    to: \"#\",\n    className: \"pull-right\",\n    onClick: notReadNotif\n  }, __jsx(\"i\", {\n    className: \"fa fa-chevron-left m-r-xs\"\n  }), __jsx(\"small\", {\n    className: \"text-muted\"\n  }, \"Back\"))))));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    users: state.users.data,\n    isAuth: state.users.isAuth,\n    tokens: state.users.token,\n    isPremium: state.users.premium,\n    paycode: state.users.paycode,\n    timers: state.timers,\n    payment: state.payment\n  };\n};\n\nexport default connect(mapStateToProps)(ModalNotfi);","map":{"version":3,"sources":["/home/ab/Code/reactJs/razzel/src/components/ModalNotif/ModalNotfi.jsx"],"names":["React","useState","useEffect","Link","connect","useToasts","api","Notify","ModalNotfi","props","isOpen","open","doRequest","tokens","req","addToast","isReadNotif","setIsReadNotif","ReadNotifId","setReadNotifId","notifMessage","setNotifMessage","newNotif","setNewNotif","getMessageNotif","method","url","then","res","data","newMsg","filter","val","is_read_notif","er","appearance","onReadNotif","id","onDeleteNotif","notReadNotif","toggle","toggleModal","length","map","haveReading","id_notif","title_notif","send_notif","text_1_notif","mapStateToProps","state","users","isAuth","token","isPremium","premium","paycode","timers","payment"],"mappings":"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","sourcesContent":["import \"./scss/style.scoped.scss\"\nimport React, { useState, useEffect } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\nimport { useToasts } from \"react-toast-notifications\"\nimport api from \"helpers/api\"\nimport Notify from \"components/NotifMsg/NotifyMsg\"\n\nfunction ModalNotfi(props) {\n    let isOpen = props.open ? \"show\" : \"hide\"\n    const doRequest = new api(props.tokens).req\n    const { addToast } = useToasts()\n\n    const [isReadNotif, setIsReadNotif] = useState(false)\n    const [ReadNotifId, setReadNotifId] = useState(0)\n    const [notifMessage, setNotifMessage] = useState([])\n    const [newNotif, setNewNotif] = useState([])\n\n    useEffect(() => {\n        if (props.open) {\n            getMessageNotif()\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.open])\n\n    const getMessageNotif = () => {\n        doRequest({\n            method: \"GET\",\n            url: `notif?page=1&per_page=5&order[id_notif]=DESC`,\n        })\n            .then((res) => {\n                const { data } = res.data\n                const newMsg = data.filter((val) => {\n                    return val.is_read_notif !== \"1\"\n                })\n                setNewNotif(newMsg)\n                setNotifMessage(data)\n            })\n            .catch((er) => {\n                addToast(\"Something happen with notif\", { appearance: \"error\" })\n            })\n    }\n\n    const onReadNotif = (id) => {\n        setIsReadNotif(true)\n        setReadNotifId(id)\n    }\n\n    const onDeleteNotif = () => {\n        setIsReadNotif(false)\n        doRequest({\n            method: \"DELETE\",\n            url: `notif`,\n            data: { id: ReadNotifId },\n        })\n            .then(() => {\n                getMessageNotif()\n            })\n            .catch((er) => {\n                addToast(\"Something happen with notif\", { appearance: \"error\" })\n            })\n    }\n    const notReadNotif = () => {\n        setIsReadNotif(false)\n        doRequest({\n            method: \"PUT\",\n            url: `notif`,\n            data: { id: ReadNotifId },\n        })\n            .then(() => {\n                getMessageNotif()\n            })\n            .catch((er) => {\n                addToast(\"Something happen with notif\", { appearance: \"error\" })\n            })\n    }\n\n    const toggle = () => {\n        props.toggleModal()\n    }\n\n    return (\n        <div className={`container ${isOpen}`}>\n            <div className=\"modal-cos\">\n                <section className=\"panel bg-white\">\n                    <div className=\"header-modal panel-heading b-light bg-light\">\n                        <div className=\"btn-close\" onClick={toggle}>\n                            <i className=\"icon-close\" />\n                        </div>\n                        <div className=\"judul\">\n                            <span className=\"hidden-nav-xs padder m-t m-b-sm text-judul\">\n                                {newNotif.length > 0 ? (\n                                    <strong>\n                                        You have <span className=\"count\">{newNotif.length}</span>{\" \"}\n                                        notifications\n                                    </strong>\n                                ) : (\n                                    <strong>notifications</strong>\n                                )}\n                            </span>\n                        </div>\n                    </div>\n                    <div className=\"list-group list-group-alt listcon\">\n                        {notifMessage.map((val) => {\n                            const haveReading = val.is_read_notif === \"1\"\n                            return (\n                                <Notify\n                                    key={val.id_notif}\n                                    id={val.id_notif}\n                                    title={val.title_notif}\n                                    time={val.send_notif}\n                                    haveread={haveReading}\n                                    message={val.text_1_notif}\n                                    isRead={isReadNotif}\n                                    readId={ReadNotifId}\n                                    reading={onReadNotif}\n                                />\n                            )\n                        })}\n                    </div>\n                    <div className={`panel-footer text-sm foot ${isReadNotif ? \"\" : \"hide\"}`}>\n                        <Link to=\"#\" className=\"pull-left\" onClick={onDeleteNotif}>\n                            <i className=\"icon-trash m-r-xs\" />\n                            <small className=\"text-muted\">Delet</small>\n                        </Link>\n                        <Link to=\"#\" className=\"pull-right\" onClick={notReadNotif}>\n                            <i className=\"fa fa-chevron-left m-r-xs\" />\n                            <small className=\"text-muted\">Back</small>\n                        </Link>\n                    </div>\n                </section>\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        users: state.users.data,\n        isAuth: state.users.isAuth,\n        tokens: state.users.token,\n        isPremium: state.users.premium,\n        paycode: state.users.paycode,\n        timers: state.timers,\n        payment: state.payment,\n    }\n}\n\nexport default connect(mapStateToProps)(ModalNotfi)\n"]},"metadata":{},"sourceType":"module"}