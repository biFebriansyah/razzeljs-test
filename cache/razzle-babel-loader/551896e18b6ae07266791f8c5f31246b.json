{"ast":null,"code":"import _asyncToGenerator from \"/home/ab/Code/reactJs/razzel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/ab/Code/reactJs/razzel/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ab/Code/reactJs/razzel/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/ab/Code/reactJs/razzel/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/ab/Code/reactJs/razzel/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/ab/Code/reactJs/razzel/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"/home/ab/Code/reactJs/razzel/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/ab/Code/reactJs/razzel/src/views/home/index.js\";\nvar __jsx = React.createElement;\nimport _regeneratorRuntime from \"/home/ab/Code/reactJs/razzel/node_modules/@babel/runtime/regenerator\";\nimport \"./css/style.scoped.css\";\nimport React, { Component } from \"react\";\nimport Cards from \"components/_Crads\";\nimport Discover from \"components/_Discovery\";\nimport Newsongs from \"components/Newsong/index\";\nimport Trend from \"components/Trending/Trending\";\nimport Topsongs from \"components/Topsongs\";\nimport TopArtis from \"components/TopArtis\";\nimport Options from \"components/OpsiBellow\";\nimport Slider from \"views/Coursel\";\nimport { connect } from \"react-redux\";\nimport { logout } from \"redux/actions/users\";\nimport { bindActionCreators } from \"redux\";\nimport { OptionsContext } from \"helpers/contex\";\nimport api from \"helpers/api\";\nimport Loader from \"components/loaderCards/LoaderCards\";\nimport HelmetMeta from \"views/Helmet\";\nimport logs from \"helpers/logs\";\n\nvar Index = /*#__PURE__*/function (_Component) {\n  _inherits(Index, _Component);\n\n  var _super = _createSuper(Index);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"togelClass\", function () {\n      _this.setState({\n        sideShow: !_this.state.sideShow\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getPage\", function () {\n      var apis = new api(_this.props.tokens);\n      return new Promise(function (resolve, reject) {\n        apis.req({\n          method: \"GET\",\n          url: \"music/discovery?page=1&per_page=1\"\n        }).then(function (res) {\n          var pagination = res.data.meta.pagination;\n          resolve(pagination.total_page);\n        })[\"catch\"](function (er) {\n          reject(new Error(\"Failed get pagination\"));\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getDiscovery\", function (paginate) {\n      var apis = new api(_this.props.tokens);\n      return new Promise(function (resolve, reject) {\n        apis.req({\n          method: \"GET\",\n          url: \"music/discovery?page=1&per_page=\".concat(paginate, \"&order[id]=ASC\")\n        }).then(function (res) {\n          var data = res.data.data;\n          resolve(data);\n        })[\"catch\"](function (er) {\n          reject(er.response);\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"veriVyToken\", function () {\n      var apis = new api(_this.props.tokens);\n      return new Promise(function (resolve, reject) {\n        apis.req({\n          method: \"GET\",\n          url: \"auth?include=personal,label,role&page=1&per_page=5\"\n        }).then(function () {\n          resolve(true);\n        })[\"catch\"](function (er) {\n          if (er.response) {\n            // console.log(er.response.data.message)\n            if (er.response.data.message === \"Token yang diberikan telah habis masa kadaluarsa\") {\n              _this.props.unsetAuth();\n            }\n          }\n\n          reject(false);\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"CardsPlay\", function (id, refsPlay, refsHov, songs) {\n      var numb = _this.state.angka + 1;\n\n      if (id !== _this.state.theId) {\n        _this.setState({\n          curentRefHov: refsHov,\n          curentRefPlay: refsPlay,\n          theId: id,\n          angka: numb\n        });\n\n        _this.context.setTheSongs(songs);\n      } else {\n        _this.setState({\n          theId: 0,\n          angka: numb\n        });\n\n        _this.context.setTheSongs(songs);\n      }\n    });\n\n    _this.state = {\n      Data: [],\n      count: 24,\n      sideShow: false,\n      isActive: false,\n      IsOutisde: false,\n      theId: 0,\n      curentRefPlay: \"\",\n      curentRefHov: \"\",\n      angka: 0,\n      isLoad: false\n    };\n    _this.currentPathname = null;\n    _this.logger = new logs(false, \"home\");\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.context.setTheme(\"bg-black\", true);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var page, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                this.setState({\n                  isLoad: true\n                });\n                _context.next = 4;\n                return this.getPage();\n\n              case 4:\n                page = _context.sent;\n                _context.next = 7;\n                return this.getDiscovery(page);\n\n              case 7:\n                data = _context.sent;\n                this.setState({\n                  Data: data,\n                  isLoad: false\n                });\n                _context.next = 11;\n                return this.veriVyToken();\n\n              case 11:\n                _context.next = 16;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](0);\n                // this.logger(error.response)\n                new logs(true, \"home\").Show(_context.t0);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 13]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(\"section\", {\n        className: \"scrollable padder-lg w-f-md\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }\n      }, __jsx(HelmetMeta, {\n        title: \"Musicfly - Listen free music\",\n        desc: \"Discovery our music maybe you will find your type and listen for it. your happy is our happiness\",\n        img: \"https://res.cloudinary.com/devops2/image/upload/v1618237589/musicfly/logo_ekro0x.png\",\n        imgalt: \"muscifly-logo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 17\n        }\n      }), __jsx(Slider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }), __jsx(\"div\", {\n        className: \"dicover\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }\n      }, __jsx(Discover, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }\n      })), __jsx(\"div\", {\n        className: \"row row-sm cards-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 17\n        }\n      }, this.state.isLoad ? Array(this.state.count).fill().map(function (_, index) {\n        return __jsx(Loader, {\n          key: index,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 42\n          }\n        });\n      }) : this.state.Data.map(function (value) {\n        var data = {\n          id: value.id,\n          uuid: value.discovery_code,\n          name: value.music_title,\n          code: value.music_code,\n          artisCod: value.artis_code,\n          singer: value.artis_complete_name,\n          cover: value.music_image_priority,\n          duration: value.music_duration,\n          musicSrc: value.music_storage_path\n        };\n        return __jsx(Cards, {\n          key: data.id,\n          idx: data.id,\n          name: data.name,\n          code: data.code,\n          artiscod: data.artisCod,\n          cover: data.cover,\n          singer: data.singer,\n          duration: data.duration,\n          loved: value.love_id,\n          songs: data,\n          isActive: _this2.state.isActive,\n          playCard: _this2.CardsPlay,\n          history: _this2.props.history,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 35\n          }\n        });\n      })), __jsx(Newsongs, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 17\n        }\n      }), __jsx(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 17\n        }\n      }, __jsx(Trend, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }\n      }), __jsx(Topsongs, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }\n      }), __jsx(TopArtis, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }\n      })), __jsx(Options, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }\n      }));\n    }\n  }]);\n\n  return Index;\n}(Component);\n\n_defineProperty(Index, \"contextType\", OptionsContext);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    unsetAuth: bindActionCreators(logout, dispatch)\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    users: state.users,\n    tokens: state.users.token,\n    isAuth: state.users.isAuth\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":{"version":3,"sources":["/home/ab/Code/reactJs/razzel/src/views/home/index.js"],"names":["React","Component","Cards","Discover","Newsongs","Trend","Topsongs","TopArtis","Options","Slider","connect","logout","bindActionCreators","OptionsContext","api","Loader","HelmetMeta","logs","Index","props","setState","sideShow","state","apis","tokens","Promise","resolve","reject","req","method","url","then","res","pagination","data","meta","total_page","er","Error","paginate","response","message","unsetAuth","id","refsPlay","refsHov","songs","numb","angka","theId","curentRefHov","curentRefPlay","context","setTheSongs","Data","count","isActive","IsOutisde","isLoad","currentPathname","logger","setTheme","getPage","page","getDiscovery","veriVyToken","Show","Array","fill","map","_","index","value","uuid","discovery_code","name","music_title","code","music_code","artisCod","artis_code","singer","artis_complete_name","cover","music_image_priority","duration","music_duration","musicSrc","music_storage_path","love_id","CardsPlay","history","mapDispatchToProps","dispatch","mapStateToProps","users","token","isAuth"],"mappings":"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","sourcesContent":["import \"./css/style.scoped.css\"\nimport React, { Component } from \"react\"\nimport Cards from \"components/_Crads\"\nimport Discover from \"components/_Discovery\"\nimport Newsongs from \"components/Newsong/index\"\nimport Trend from \"components/Trending/Trending\"\nimport Topsongs from \"components/Topsongs\"\nimport TopArtis from \"components/TopArtis\"\nimport Options from \"components/OpsiBellow\"\nimport Slider from \"views/Coursel\"\nimport { connect } from \"react-redux\"\nimport { logout } from \"redux/actions/users\"\nimport { bindActionCreators } from \"redux\"\nimport { OptionsContext } from \"helpers/contex\"\nimport api from \"helpers/api\"\nimport Loader from \"components/loaderCards/LoaderCards\"\nimport HelmetMeta from \"views/Helmet\"\nimport logs from \"helpers/logs\"\n\nclass Index extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            Data: [],\n            count: 24,\n            sideShow: false,\n            isActive: false,\n            IsOutisde: false,\n            theId: 0,\n            curentRefPlay: \"\",\n            curentRefHov: \"\",\n            angka: 0,\n            isLoad: false,\n        }\n        this.currentPathname = null\n        this.logger = new logs(false, \"home\")\n    }\n\n    static contextType = OptionsContext\n\n    componentWillUnmount() {\n        this.context.setTheme(\"bg-black\", true)\n    }\n\n    togelClass = () => {\n        this.setState({\n            sideShow: !this.state.sideShow,\n        })\n    }\n\n    getPage = () => {\n        const apis = new api(this.props.tokens)\n        return new Promise((resolve, reject) => {\n            apis.req({\n                method: \"GET\",\n                url: \"music/discovery?page=1&per_page=1\",\n            })\n                .then((res) => {\n                    const { pagination } = res.data.meta\n                    resolve(pagination.total_page)\n                })\n                .catch((er) => {\n                    reject(new Error(\"Failed get pagination\"))\n                })\n        })\n    }\n\n    getDiscovery = (paginate) => {\n        const apis = new api(this.props.tokens)\n        return new Promise((resolve, reject) => {\n            apis.req({\n                method: \"GET\",\n                url: `music/discovery?page=1&per_page=${paginate}&order[id]=ASC`,\n            })\n                .then((res) => {\n                    const { data } = res.data\n                    resolve(data)\n                })\n                .catch((er) => {\n                    reject(er.response)\n                })\n        })\n    }\n\n    veriVyToken = () => {\n        const apis = new api(this.props.tokens)\n        return new Promise((resolve, reject) => {\n            apis.req({\n                method: \"GET\",\n                url: `auth?include=personal,label,role&page=1&per_page=5`,\n            })\n                .then(() => {\n                    resolve(true)\n                })\n                .catch((er) => {\n                    if (er.response) {\n                        // console.log(er.response.data.message)\n                        if (\n                            er.response.data.message ===\n                            \"Token yang diberikan telah habis masa kadaluarsa\"\n                        ) {\n                            this.props.unsetAuth()\n                        }\n                    }\n                    reject(false)\n                })\n        })\n    }\n\n    async componentDidMount() {\n        try {\n            this.setState({ isLoad: true })\n            const page = await this.getPage()\n            const data = await this.getDiscovery(page)\n            this.setState({ Data: data, isLoad: false })\n            await this.veriVyToken()\n        } catch (error) {\n            // this.logger(error.response)\n            new logs(true, \"home\").Show(error)\n        }\n    }\n\n    CardsPlay = (id, refsPlay, refsHov, songs) => {\n        const numb = this.state.angka + 1\n        if (id !== this.state.theId) {\n            this.setState({\n                curentRefHov: refsHov,\n                curentRefPlay: refsPlay,\n                theId: id,\n                angka: numb,\n            })\n            this.context.setTheSongs(songs)\n        } else {\n            this.setState({ theId: 0, angka: numb })\n            this.context.setTheSongs(songs)\n        }\n    }\n\n    render() {\n        return (\n            <section className=\"scrollable padder-lg w-f-md\">\n                <HelmetMeta\n                    title=\"Musicfly - Listen free music\"\n                    desc=\"Discovery our music maybe you will find your type and listen for it. your happy is our happiness\"\n                    img=\"https://res.cloudinary.com/devops2/image/upload/v1618237589/musicfly/logo_ekro0x.png\"\n                    imgalt=\"muscifly-logo\"\n                />\n                <Slider />\n                <div className=\"dicover\">\n                    <Discover />\n                </div>\n                <div className=\"row row-sm cards-container\">\n                    {this.state.isLoad\n                        ? Array(this.state.count)\n                              .fill()\n                              .map((_, index) => {\n                                  return <Loader key={index} />\n                              })\n                        : this.state.Data.map((value) => {\n                              const data = {\n                                  id: value.id,\n                                  uuid: value.discovery_code,\n                                  name: value.music_title,\n                                  code: value.music_code,\n                                  artisCod: value.artis_code,\n                                  singer: value.artis_complete_name,\n                                  cover: value.music_image_priority,\n                                  duration: value.music_duration,\n                                  musicSrc: value.music_storage_path,\n                              }\n                              return (\n                                  <Cards\n                                      key={data.id}\n                                      idx={data.id}\n                                      name={data.name}\n                                      code={data.code}\n                                      artiscod={data.artisCod}\n                                      cover={data.cover}\n                                      singer={data.singer}\n                                      duration={data.duration}\n                                      loved={value.love_id}\n                                      songs={data}\n                                      isActive={this.state.isActive}\n                                      playCard={this.CardsPlay}\n                                      history={this.props.history}\n                                  />\n                              )\n                          })}\n                </div>\n                <Newsongs />\n                <div className=\"row\">\n                    <Trend />\n                    <Topsongs />\n                    <TopArtis />\n                </div>\n                <Options />\n            </section>\n        )\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        unsetAuth: bindActionCreators(logout, dispatch),\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        users: state.users,\n        tokens: state.users.token,\n        isAuth: state.users.isAuth,\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index)\n"]},"metadata":{},"sourceType":"module"}