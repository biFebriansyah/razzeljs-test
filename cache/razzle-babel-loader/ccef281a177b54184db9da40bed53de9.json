{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport api from \"helpers/api\";\nimport times from \"redux/actions/timer\";\nimport { unsetPayCode } from \"redux/actions/users\";\nimport { useDropzone } from \"react-dropzone\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport \"./scss/style.scoped.scss\";\n\nfunction Upload(props) {\n  var isOpen = props.open ? \"show\" : \"hide\";\n  var doRequest = new api(props.tokens).FormData;\n\n  var _useDropzone = useDropzone({\n    accept: \"image/jpeg, image/png\",\n    noKeyboard: true,\n    noClick: true\n  }),\n      getRootProps = _useDropzone.getRootProps,\n      getInputProps = _useDropzone.getInputProps,\n      open = _useDropzone.open,\n      acceptedFiles = _useDropzone.acceptedFiles;\n\n  var _useState = useState(null),\n      imageFile = _useState[0],\n      setImageFile = _useState[1];\n\n  var _useState2 = useState(null),\n      imageName = _useState2[0],\n      setImageName = _useState2[1];\n\n  var _useState3 = useState(false),\n      onProgress = _useState3[0],\n      setOnProgress = _useState3[1];\n\n  var _useState4 = useState(false),\n      onFinish = _useState4[0],\n      setOnFinish = _useState4[1];\n\n  useEffect(function () {\n    if (imageFile !== null) {\n      console.log(imageFile);\n    }\n  }, [imageFile]);\n  useEffect(function () {\n    if (onFinish) {\n      setTimeout(function () {\n        toggle();\n      }, 1000);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [onFinish]);\n  useEffect(function () {\n    if (acceptedFiles.length > 0) {\n      acceptedFiles.map(function (data) {\n        setImageName(data.name);\n        setImageFile(data);\n        return true;\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [acceptedFiles]);\n\n  var upload = function upload() {\n    setOnProgress(true);\n    var bodyFormData = new FormData();\n    bodyFormData.append(\"file\", imageFile);\n    bodyFormData.append(\"payment_code\", props.paycode);\n    bodyFormData.append(\"type\", \"PREMIUM\");\n    doRequest({\n      method: \"POST\",\n      url: \"payment/upload/evidence\",\n      data: bodyFormData\n    }).then(function () {\n      props.StopTimer();\n      props.RemoveCode();\n      setOnProgress(false);\n      setOnFinish(true);\n    })[\"catch\"](function (er) {\n      console.log(er);\n    });\n  };\n\n  var toggle = function toggle() {\n    props.toggleModal();\n  };\n\n  var LoadingList = function LoadingList() {\n    var styling = {\n      width: \"100%\",\n      height: \"100vh\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      fontSize: \"40px\",\n      color: \"white\"\n    };\n    return __jsx(\"div\", {\n      className: \"onloadList\",\n      style: styling\n    }, __jsx(\"i\", {\n      className: \"fa fa-spin fa-spinner text\",\n      style: {\n        marginRight: \"10px\"\n      }\n    }), __jsx(\"span\", {\n      className: \"text\"\n    }, \"Wait..\"));\n  };\n\n  var success = function success() {\n    var styling = {\n      width: \"100%\",\n      height: \"100vh\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      fontSize: \"40px\"\n    };\n    return __jsx(\"div\", {\n      className: \"onloadList\",\n      style: styling\n    }, __jsx(\"i\", {\n      className: \"fa fa-check-circle text-success\",\n      style: {\n        marginRight: \"10px\"\n      }\n    }), __jsx(\"span\", {\n      className: \"text text-success\"\n    }, \"Upload Selesai\"));\n  };\n\n  return __jsx(\"div\", {\n    className: \"container \".concat(isOpen)\n  }, onProgress ? LoadingList() : onFinish ? success() : __jsx(\"div\", {\n    className: \"modal-cos\"\n  }, __jsx(\"div\", {\n    className: \"btn-close\",\n    onClick: toggle\n  }, __jsx(\"i\", {\n    className: \"icon-close\"\n  })), __jsx(\"div\", getRootProps({\n    className: \"dropzone\"\n  }), __jsx(\"input\", getInputProps()), __jsx(\"div\", {\n    className: \"main\"\n  }, __jsx(\"div\", {\n    className: \"top\"\n  }, __jsx(Link, {\n    to: \"#\",\n    className: \"choose\",\n    onClick: open\n  }, __jsx(\"i\", {\n    className: \"fa fa-file i-2x text text-image\"\n  }), __jsx(\"h3\", {\n    className: \"text-image\"\n  }, imageName ? imageName : \"Choose Struck\"))), __jsx(\"div\", {\n    className: \"bot\"\n  }, __jsx(Link, {\n    className: \"btn btn-Black\",\n    to: \"#\",\n    onClick: upload\n  }, __jsx(\"span\", {\n    className: \"text\"\n  }, \"Uploads\"), __jsx(\"i\", {\n    className: \"fa fa-spin fa-spinner text-active\",\n    style: {\n      marginRight: \"10px\"\n    }\n  }), __jsx(\"span\", {\n    className: \"text-active\"\n  }, \"Wait..\")))))));\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    StopTimer: bindActionCreators(times.ResetTimer, dispatch),\n    RemoveCode: bindActionCreators(unsetPayCode, dispatch)\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    users: state.users,\n    tokens: state.users.token,\n    paycode: state.users.paycode\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Upload);","map":{"version":3,"sources":["/home/ab/Code/reactJs/razzel/src/components/UploadStruck/Upload.jsx"],"names":["React","useState","useEffect","Link","api","times","unsetPayCode","useDropzone","connect","bindActionCreators","Upload","props","isOpen","open","doRequest","tokens","FormData","accept","noKeyboard","noClick","getRootProps","getInputProps","acceptedFiles","imageFile","setImageFile","imageName","setImageName","onProgress","setOnProgress","onFinish","setOnFinish","console","log","setTimeout","toggle","length","map","data","name","upload","bodyFormData","append","paycode","method","url","then","StopTimer","RemoveCode","er","toggleModal","LoadingList","styling","width","height","display","justifyContent","alignItems","fontSize","color","marginRight","success","className","mapDispatchToProps","dispatch","ResetTimer","mapStateToProps","state","users","token"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport api from \"helpers/api\"\nimport times from \"redux/actions/timer\"\nimport { unsetPayCode } from \"redux/actions/users\"\nimport { useDropzone } from \"react-dropzone\"\nimport { connect } from \"react-redux\"\nimport { bindActionCreators } from \"redux\"\nimport \"./scss/style.scoped.scss\"\n\nfunction Upload(props) {\n    const isOpen = props.open ? \"show\" : \"hide\"\n    const doRequest = new api(props.tokens).FormData\n    const { getRootProps, getInputProps, open, acceptedFiles } = useDropzone({\n        accept: \"image/jpeg, image/png\",\n        noKeyboard: true,\n        noClick: true,\n    })\n\n    const [imageFile, setImageFile] = useState(null)\n    const [imageName, setImageName] = useState(null)\n    const [onProgress, setOnProgress] = useState(false)\n    const [onFinish, setOnFinish] = useState(false)\n\n    useEffect(() => {\n        if (imageFile !== null) {\n            console.log(imageFile)\n        }\n    }, [imageFile])\n\n    useEffect(() => {\n        if (onFinish) {\n            setTimeout(() => {\n                toggle()\n            }, 1000)\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [onFinish])\n\n    useEffect(() => {\n        if (acceptedFiles.length > 0) {\n            acceptedFiles.map((data) => {\n                setImageName(data.name)\n                setImageFile(data)\n                return true\n            })\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [acceptedFiles])\n\n    const upload = () => {\n        setOnProgress(true)\n        const bodyFormData = new FormData()\n        bodyFormData.append(\"file\", imageFile)\n        bodyFormData.append(\"payment_code\", props.paycode)\n        bodyFormData.append(\"type\", \"PREMIUM\")\n\n        doRequest({\n            method: \"POST\",\n            url: \"payment/upload/evidence\",\n            data: bodyFormData,\n        })\n            .then(() => {\n                props.StopTimer()\n                props.RemoveCode()\n                setOnProgress(false)\n                setOnFinish(true)\n            })\n            .catch((er) => {\n                console.log(er)\n            })\n    }\n\n    const toggle = () => {\n        props.toggleModal()\n    }\n\n    const LoadingList = () => {\n        const styling = {\n            width: \"100%\",\n            height: \"100vh\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            fontSize: \"40px\",\n            color: \"white\",\n        }\n        return (\n            <div className=\"onloadList\" style={styling}>\n                <i className=\"fa fa-spin fa-spinner text\" style={{ marginRight: \"10px\" }} />\n                <span className=\"text\">Wait..</span>\n            </div>\n        )\n    }\n\n    const success = () => {\n        const styling = {\n            width: \"100%\",\n            height: \"100vh\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            fontSize: \"40px\",\n        }\n        return (\n            <div className=\"onloadList\" style={styling}>\n                <i className=\"fa fa-check-circle text-success\" style={{ marginRight: \"10px\" }} />\n                <span className=\"text text-success\">Upload Selesai</span>\n            </div>\n        )\n    }\n\n    return (\n        <div className={`container ${isOpen}`}>\n            {onProgress ? (\n                LoadingList()\n            ) : onFinish ? (\n                success()\n            ) : (\n                <div className=\"modal-cos\">\n                    <div className=\"btn-close\" onClick={toggle}>\n                        <i className=\"icon-close\" />\n                    </div>\n                    <div {...getRootProps({ className: \"dropzone\" })}>\n                        <input {...getInputProps()} />\n                        <div className=\"main\">\n                            <div className=\"top\">\n                                <Link to=\"#\" className=\"choose\" onClick={open}>\n                                    <i className=\"fa fa-file i-2x text text-image\" />\n                                    <h3 className=\"text-image\">\n                                        {imageName ? imageName : \"Choose Struck\"}\n                                    </h3>\n                                </Link>\n                            </div>\n                            <div className=\"bot\">\n                                <Link className={`btn btn-Black`} to=\"#\" onClick={upload}>\n                                    <span className=\"text\">Uploads</span>\n                                    <i\n                                        className=\"fa fa-spin fa-spinner text-active\"\n                                        style={{ marginRight: \"10px\" }}\n                                    />\n                                    <span className=\"text-active\">Wait..</span>\n                                </Link>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    )\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        StopTimer: bindActionCreators(times.ResetTimer, dispatch),\n        RemoveCode: bindActionCreators(unsetPayCode, dispatch),\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        users: state.users,\n        tokens: state.users.token,\n        paycode: state.users.paycode,\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Upload)\n"]},"metadata":{},"sourceType":"module"}