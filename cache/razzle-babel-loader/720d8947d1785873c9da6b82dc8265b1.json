{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useRef, useEffect, useContext, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { withRouter } from \"react-router\";\nimport playerActions from \"redux/actions/player\";\nimport { OptionsContext } from \"helpers/contex\";\nimport Logs from \"helpers/logs\";\nimport api from \"helpers/api\";\nimport { connect } from \"react-redux\";\nimport { setDetailSongs } from \"redux/actions/utils\";\nimport { bindActionCreators } from \"redux\";\nimport { useToasts } from \"react-toast-notifications\";\nimport ImageContainer from \"components/cosImage/imgload\";\n\nfunction Cards2(props) {\n  var refLove = useRef(null);\n  var refPlay = useRef(null);\n  var refHover = useRef(null);\n\n  var _useState = useState(null),\n      LoveId = _useState[0],\n      setLoveId = _useState[1];\n\n  var _useState2 = useState(false),\n      UseLoveId = _useState2[0],\n      setUseLoveId = _useState2[1];\n\n  var doRequest = new api(props.tokens).req;\n  var logger = new Logs(false, \"Cards2\");\n\n  var _useToasts = useToasts(),\n      addToast = _useToasts.addToast;\n\n  var _useContext = useContext(OptionsContext),\n      choiceList = _useContext.choiceList;\n\n  var trigerPlayer = function trigerPlayer() {\n    if (typeof props.player.playing.code !== \"undefined\" && props.player.playing.code === props.code) {\n      props.setContinue();\n    } else {\n      props.setSongs(props.songs);\n    }\n  };\n\n  var toglePlay = function toglePlay() {\n    // props.playCard(props.idx, refPlay, refHover, props.songs)\n    if (!refPlay.current.classList.contains(\"active\")) {\n      refPlay.current.classList.add(\"active\");\n      refHover.current.classList.add(\"active\");\n      trigerPlayer();\n    } else {\n      refPlay.current.classList.remove(\"active\");\n      refHover.current.classList.remove(\"active\");\n\n      if (props.player.isPlay) {\n        props.setPausing();\n      }\n    }\n  };\n\n  useEffect(function () {\n    logger.Show(props.player.playing);\n\n    if (props.player.isPlay) {\n      if (props.player.playing.code === props.code) {\n        refPlay.current.classList.add(\"active\");\n        refHover.current.classList.add(\"active\");\n      } else {\n        refPlay.current.classList.remove(\"active\");\n        refHover.current.classList.remove(\"active\");\n      }\n    } // if (props.player.isPlay) {\n    //     if (props.player.Data.name === props.name) {\n    //         refPlay.current.classList.add(\"active\")\n    //         refHover.current.classList.add(\"active\")\n    //     } else {\n    //         refPlay.current.classList.remove(\"active\")\n    //         refHover.current.classList.remove(\"active\")\n    //     }\n    // }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [props.player]);\n  useEffect(function () {\n    if (props.player.isPause) {\n      if (props.player.playing.code === props.code) {\n        refPlay.current.classList.remove(\"active\");\n        refHover.current.classList.remove(\"active\");\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [props.player.isPause]);\n\n  var toDetail = function toDetail() {\n    var data = {\n      id: props.idx,\n      code: props.code,\n      uuid: props.idx,\n      name: props.name,\n      singer: props.singer,\n      cover: props.cover,\n      songs: props.songs,\n      history: props.history\n    };\n    props.SetDetail(data);\n    props.history.push(\"/songs/\".concat(props.code));\n  };\n\n  var togleLove = function togleLove() {\n    if (!refLove.current.classList.contains(\"active\")) {\n      doRequest({\n        method: \"POST\",\n        url: \"music/love\",\n        data: {\n          music_code: props.code\n        }\n      }).then(function (res) {\n        var data = res.data;\n        setLoveId(data.love_id);\n        setUseLoveId(true);\n        refLove.current.classList.add(\"active\");\n      })[\"catch\"](function (err) {\n        logger.Show(err);\n        addToast(\"Maaf Kesalahan terjadi\", {\n          appearance: \"error\"\n        });\n      });\n    } else {\n      doRequest({\n        method: \"DELETE\",\n        url: \"music/love?id=\".concat(UseLoveId ? LoveId : props.loved)\n      }).then(function () {\n        setUseLoveId(false);\n        refLove.current.classList.remove(\"active\");\n      })[\"catch\"](function (er) {\n        addToast(er.response.data.message, {\n          appearance: \"error\"\n        });\n      });\n    }\n  };\n\n  var selectList = function selectList() {\n    if (props.isAuth) {\n      choiceList(props.code);\n    } else {\n      addToast(\"Login add playlist\", {\n        appearance: \"info\"\n      });\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"col-xs-6 col-sm-4 col-md-3 col-lg-2\"\n  }, __jsx(\"div\", {\n    className: \"item\"\n  }, __jsx(\"div\", {\n    className: \"pos-rlt\"\n  }, __jsx(\"div\", {\n    className: \"bottom\"\n  }, __jsx(\"span\", {\n    className: \"badge bg-info m-l-sm m-b-sm\"\n  }, props.duration)), __jsx(\"div\", {\n    className: \"item-overlay opacity r r-2x bg-black\",\n    ref: refHover\n  }, __jsx(\"div\", {\n    className: \"center text-center m-t-n\"\n  }, __jsx(Link, {\n    to: \"#\",\n    \"data-toggle\": \"class\",\n    ref: refPlay,\n    onClick: toglePlay\n  }, __jsx(\"i\", {\n    className: \"icon-control-play i-2x text\"\n  }), __jsx(\"i\", {\n    className: \"icon-control-pause i-2x text-active\"\n  }))), __jsx(\"div\", {\n    className: \"bottom padder m-b-sm hover-btn \".concat(props.isAuth ? \"\" : \"hide\"),\n    style: {\n      right: 0,\n      left: \"auto\"\n    }\n  }, __jsx(Link, {\n    to: \"#\",\n    className: \"pull-right \".concat(props.loved ? \"active\" : \"\"),\n    ref: refLove,\n    onClick: togleLove,\n    \"data-toggle\": \"class\",\n    style: {\n      marginLeft: \"10px\"\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-heart-o text\"\n  }), __jsx(\"i\", {\n    className: \"fa fa-heart text-active text-danger\"\n  })), __jsx(Link, {\n    to: \"#\",\n    \"data-toggle\": \"class\",\n    onClick: selectList\n  }, __jsx(\"i\", {\n    className: \"fa fa-plus-circle text\"\n  }), __jsx(\"i\", {\n    className: \"fa fa-check-circle text-active text-info\"\n  })))), __jsx(ImageContainer, {\n    src: props.cover,\n    alt: \"a2\",\n    height: 142,\n    width: 142\n  })), __jsx(\"div\", {\n    className: \"padder-v\"\n  }, __jsx(Link, {\n    to: \"#\",\n    onClick: toDetail,\n    className: \"text-ellipsis\"\n  }, props.name), __jsx(Link, {\n    to: \"/artis/\".concat(props.artiscod),\n    className: \"text-ellipsis text-xs text-muted\"\n  }, props.singer))));\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    SetDetail: bindActionCreators(setDetailSongs, dispatch),\n    setSongs: bindActionCreators(playerActions.setSongs, dispatch),\n    setPausing: bindActionCreators(playerActions.setPause, dispatch),\n    setContinue: bindActionCreators(playerActions.setContinue, dispatch)\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    player: state.player,\n    isAuth: state.users.isAuth,\n    tokens: state.users.token\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Cards2));","map":{"version":3,"sources":["/home/ab/Code/reactJs/razzel/src/components/_Crads.jsx"],"names":["React","useRef","useEffect","useContext","useState","Link","withRouter","playerActions","OptionsContext","Logs","api","connect","setDetailSongs","bindActionCreators","useToasts","ImageContainer","Cards2","props","refLove","refPlay","refHover","LoveId","setLoveId","UseLoveId","setUseLoveId","doRequest","tokens","req","logger","addToast","choiceList","trigerPlayer","player","playing","code","setContinue","setSongs","songs","toglePlay","current","classList","contains","add","remove","isPlay","setPausing","Show","isPause","toDetail","data","id","idx","uuid","name","singer","cover","history","SetDetail","push","togleLove","method","url","music_code","then","res","love_id","err","appearance","loved","er","response","message","selectList","isAuth","duration","right","left","marginLeft","artiscod","mapDispatchToProps","dispatch","setPause","mapStateToProps","state","users","token"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useContext, useState } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport { withRouter } from \"react-router\"\nimport playerActions from \"redux/actions/player\"\nimport { OptionsContext } from \"helpers/contex\"\nimport Logs from \"helpers/logs\"\nimport api from \"helpers/api\"\nimport { connect } from \"react-redux\"\nimport { setDetailSongs } from \"redux/actions/utils\"\nimport { bindActionCreators } from \"redux\"\nimport { useToasts } from \"react-toast-notifications\"\nimport ImageContainer from \"components/cosImage/imgload\"\n\nfunction Cards2(props) {\n    const refLove = useRef(null)\n    const refPlay = useRef(null)\n    const refHover = useRef(null)\n    const [LoveId, setLoveId] = useState(null)\n    const [UseLoveId, setUseLoveId] = useState(false)\n    const doRequest = new api(props.tokens).req\n    const logger = new Logs(false, \"Cards2\")\n    const { addToast } = useToasts()\n    const { choiceList } = useContext(OptionsContext)\n\n    const trigerPlayer = () => {\n        if (\n            typeof props.player.playing.code !== \"undefined\" &&\n            props.player.playing.code === props.code\n        ) {\n            props.setContinue()\n        } else {\n            props.setSongs(props.songs)\n        }\n    }\n\n    const toglePlay = () => {\n        // props.playCard(props.idx, refPlay, refHover, props.songs)\n        if (!refPlay.current.classList.contains(\"active\")) {\n            refPlay.current.classList.add(\"active\")\n            refHover.current.classList.add(\"active\")\n            trigerPlayer()\n        } else {\n            refPlay.current.classList.remove(\"active\")\n            refHover.current.classList.remove(\"active\")\n            if (props.player.isPlay) {\n                props.setPausing()\n            }\n        }\n    }\n\n    useEffect(() => {\n        logger.Show(props.player.playing)\n        if (props.player.isPlay) {\n            if (props.player.playing.code === props.code) {\n                refPlay.current.classList.add(\"active\")\n                refHover.current.classList.add(\"active\")\n            } else {\n                refPlay.current.classList.remove(\"active\")\n                refHover.current.classList.remove(\"active\")\n            }\n        }\n        // if (props.player.isPlay) {\n        //     if (props.player.Data.name === props.name) {\n        //         refPlay.current.classList.add(\"active\")\n        //         refHover.current.classList.add(\"active\")\n        //     } else {\n        //         refPlay.current.classList.remove(\"active\")\n        //         refHover.current.classList.remove(\"active\")\n        //     }\n        // }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.player])\n\n    useEffect(() => {\n        if (props.player.isPause) {\n            if (props.player.playing.code === props.code) {\n                refPlay.current.classList.remove(\"active\")\n                refHover.current.classList.remove(\"active\")\n            }\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.player.isPause])\n\n    const toDetail = () => {\n        const data = {\n            id: props.idx,\n            code: props.code,\n            uuid: props.idx,\n            name: props.name,\n            singer: props.singer,\n            cover: props.cover,\n            songs: props.songs,\n            history: props.history,\n        }\n        props.SetDetail(data)\n        props.history.push(`/songs/${props.code}`)\n    }\n\n    const togleLove = () => {\n        if (!refLove.current.classList.contains(\"active\")) {\n            doRequest({\n                method: \"POST\",\n                url: \"music/love\",\n                data: {\n                    music_code: props.code,\n                },\n            })\n                .then((res) => {\n                    const { data } = res\n                    setLoveId(data.love_id)\n                    setUseLoveId(true)\n                    refLove.current.classList.add(\"active\")\n                })\n                .catch((err) => {\n                    logger.Show(err)\n                    addToast(\"Maaf Kesalahan terjadi\", { appearance: \"error\" })\n                })\n        } else {\n            doRequest({\n                method: \"DELETE\",\n                url: `music/love?id=${UseLoveId ? LoveId : props.loved}`,\n            })\n                .then(() => {\n                    setUseLoveId(false)\n                    refLove.current.classList.remove(\"active\")\n                })\n                .catch((er) => {\n                    addToast(er.response.data.message, { appearance: \"error\" })\n                })\n        }\n    }\n\n    const selectList = () => {\n        if (props.isAuth) {\n            choiceList(props.code)\n        } else {\n            addToast(`Login add playlist`, { appearance: \"info\" })\n        }\n    }\n\n    return (\n        <div className=\"col-xs-6 col-sm-4 col-md-3 col-lg-2\">\n            <div className=\"item\">\n                <div className=\"pos-rlt\">\n                    <div className=\"bottom\">\n                        <span className=\"badge bg-info m-l-sm m-b-sm\">{props.duration}</span>\n                    </div>\n                    <div className=\"item-overlay opacity r r-2x bg-black\" ref={refHover}>\n                        <div className=\"center text-center m-t-n\">\n                            <Link to=\"#\" data-toggle=\"class\" ref={refPlay} onClick={toglePlay}>\n                                <i className=\"icon-control-play i-2x text\" />\n                                <i className=\"icon-control-pause i-2x text-active\" />\n                            </Link>\n                        </div>\n                        <div\n                            className={`bottom padder m-b-sm hover-btn ${\n                                props.isAuth ? \"\" : \"hide\"\n                            }`}\n                            style={{ right: 0, left: \"auto\" }}\n                        >\n                            <Link\n                                to=\"#\"\n                                className={`pull-right ${props.loved ? \"active\" : \"\"}`}\n                                ref={refLove}\n                                onClick={togleLove}\n                                data-toggle=\"class\"\n                                style={{ marginLeft: \"10px\" }}\n                            >\n                                <i className=\"fa fa-heart-o text\" />\n                                <i className=\"fa fa-heart text-active text-danger\" />\n                            </Link>\n                            <Link to=\"#\" data-toggle=\"class\" onClick={selectList}>\n                                <i className=\"fa fa-plus-circle text\" />\n                                <i className=\"fa fa-check-circle text-active text-info\" />\n                            </Link>\n                        </div>\n                    </div>\n                    {/* <Link to=\"#\">\n                        <img src={props.cover} alt=\"p2\" className=\"r r-2x img-full\" />\n                    </Link> */}\n                    <ImageContainer src={props.cover} alt=\"a2\" height={142} width={142} />\n                </div>\n                <div className=\"padder-v\">\n                    <Link to=\"#\" onClick={toDetail} className=\"text-ellipsis\">\n                        {props.name}\n                    </Link>\n                    <Link\n                        to={`/artis/${props.artiscod}`}\n                        className=\"text-ellipsis text-xs text-muted\"\n                    >\n                        {props.singer}\n                    </Link>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        SetDetail: bindActionCreators(setDetailSongs, dispatch),\n        setSongs: bindActionCreators(playerActions.setSongs, dispatch),\n        setPausing: bindActionCreators(playerActions.setPause, dispatch),\n        setContinue: bindActionCreators(playerActions.setContinue, dispatch),\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        player: state.player,\n        isAuth: state.users.isAuth,\n        tokens: state.users.token,\n    }\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Cards2)\n)\n"]},"metadata":{},"sourceType":"module"}