{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport api from \"helpers/api\";\nimport times from \"redux/actions/timer\";\nimport { unsetPayCode } from \"redux/actions/users\";\nimport { useDropzone } from \"react-dropzone\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport \"./scss/style.scoped.scss\";\n\nfunction Upload(props) {\n  const isOpen = props.open ? \"show\" : \"hide\";\n  const doRequest = new api(props.tokens).FormData;\n  const {\n    getRootProps,\n    getInputProps,\n    open,\n    acceptedFiles\n  } = useDropzone({\n    accept: \"image/jpeg, image/png\",\n    noKeyboard: true,\n    noClick: true\n  });\n  const {\n    0: imageFile,\n    1: setImageFile\n  } = useState(null);\n  const {\n    0: imageName,\n    1: setImageName\n  } = useState(null);\n  const {\n    0: onProgress,\n    1: setOnProgress\n  } = useState(false);\n  const {\n    0: onFinish,\n    1: setOnFinish\n  } = useState(false);\n  useEffect(() => {\n    if (imageFile !== null) {\n      console.log(imageFile);\n    }\n  }, [imageFile]);\n  useEffect(() => {\n    if (onFinish) {\n      setTimeout(() => {\n        toggle();\n      }, 1000);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [onFinish]);\n  useEffect(() => {\n    if (acceptedFiles.length > 0) {\n      acceptedFiles.map(data => {\n        setImageName(data.name);\n        setImageFile(data);\n        return true;\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [acceptedFiles]);\n\n  const upload = () => {\n    setOnProgress(true);\n    const bodyFormData = new FormData();\n    bodyFormData.append(\"file\", imageFile);\n    bodyFormData.append(\"payment_code\", props.paycode);\n    bodyFormData.append(\"type\", \"PREMIUM\");\n    doRequest({\n      method: \"POST\",\n      url: \"payment/upload/evidence\",\n      data: bodyFormData\n    }).then(() => {\n      props.StopTimer();\n      props.RemoveCode();\n      setOnProgress(false);\n      setOnFinish(true);\n    }).catch(er => {\n      console.log(er);\n    });\n  };\n\n  const toggle = () => {\n    props.toggleModal();\n  };\n\n  const LoadingList = () => {\n    const styling = {\n      width: \"100%\",\n      height: \"100vh\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      fontSize: \"40px\",\n      color: \"white\"\n    };\n    return __jsx(\"div\", {\n      className: \"onloadList\",\n      style: styling\n    }, __jsx(\"i\", {\n      className: \"fa fa-spin fa-spinner text\",\n      style: {\n        marginRight: \"10px\"\n      }\n    }), __jsx(\"span\", {\n      className: \"text\"\n    }, \"Wait..\"));\n  };\n\n  const success = () => {\n    const styling = {\n      width: \"100%\",\n      height: \"100vh\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      fontSize: \"40px\"\n    };\n    return __jsx(\"div\", {\n      className: \"onloadList\",\n      style: styling\n    }, __jsx(\"i\", {\n      className: \"fa fa-check-circle text-success\",\n      style: {\n        marginRight: \"10px\"\n      }\n    }), __jsx(\"span\", {\n      className: \"text text-success\"\n    }, \"Upload Selesai\"));\n  };\n\n  return __jsx(\"div\", {\n    className: `container ${isOpen}`\n  }, onProgress ? LoadingList() : onFinish ? success() : __jsx(\"div\", {\n    className: \"modal-cos\"\n  }, __jsx(\"div\", {\n    className: \"btn-close\",\n    onClick: toggle\n  }, __jsx(\"i\", {\n    className: \"icon-close\"\n  })), __jsx(\"div\", getRootProps({\n    className: \"dropzone\"\n  }), __jsx(\"input\", getInputProps()), __jsx(\"div\", {\n    className: \"main\"\n  }, __jsx(\"div\", {\n    className: \"top\"\n  }, __jsx(Link, {\n    to: \"#\",\n    className: \"choose\",\n    onClick: open\n  }, __jsx(\"i\", {\n    className: \"fa fa-file i-2x text text-image\"\n  }), __jsx(\"h3\", {\n    className: \"text-image\"\n  }, imageName ? imageName : \"Choose Struck\"))), __jsx(\"div\", {\n    className: \"bot\"\n  }, __jsx(Link, {\n    className: `btn btn-Black`,\n    to: \"#\",\n    onClick: upload\n  }, __jsx(\"span\", {\n    className: \"text\"\n  }, \"Uploads\"), __jsx(\"i\", {\n    className: \"fa fa-spin fa-spinner text-active\",\n    style: {\n      marginRight: \"10px\"\n    }\n  }), __jsx(\"span\", {\n    className: \"text-active\"\n  }, \"Wait..\")))))));\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    StopTimer: bindActionCreators(times.ResetTimer, dispatch),\n    RemoveCode: bindActionCreators(unsetPayCode, dispatch)\n  };\n};\n\nconst mapStateToProps = state => {\n  return {\n    users: state.users,\n    tokens: state.users.token,\n    paycode: state.users.paycode\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Upload);","map":{"version":3,"sources":["/home/ab/Code/reactJs/razzel/src/components/UploadStruck/Upload.jsx"],"names":["React","useState","useEffect","Link","api","times","unsetPayCode","useDropzone","connect","bindActionCreators","Upload","props","isOpen","open","doRequest","tokens","FormData","getRootProps","getInputProps","acceptedFiles","accept","noKeyboard","noClick","imageFile","setImageFile","imageName","setImageName","onProgress","setOnProgress","onFinish","setOnFinish","console","log","setTimeout","toggle","length","map","data","name","upload","bodyFormData","append","paycode","method","url","then","StopTimer","RemoveCode","catch","er","toggleModal","LoadingList","styling","width","height","display","justifyContent","alignItems","fontSize","color","marginRight","success","className","mapDispatchToProps","dispatch","ResetTimer","mapStateToProps","state","users","token"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport api from \"helpers/api\"\nimport times from \"redux/actions/timer\"\nimport { unsetPayCode } from \"redux/actions/users\"\nimport { useDropzone } from \"react-dropzone\"\nimport { connect } from \"react-redux\"\nimport { bindActionCreators } from \"redux\"\nimport \"./scss/style.scoped.scss\"\n\nfunction Upload(props) {\n    const isOpen = props.open ? \"show\" : \"hide\"\n    const doRequest = new api(props.tokens).FormData\n    const { getRootProps, getInputProps, open, acceptedFiles } = useDropzone({\n        accept: \"image/jpeg, image/png\",\n        noKeyboard: true,\n        noClick: true,\n    })\n\n    const [imageFile, setImageFile] = useState(null)\n    const [imageName, setImageName] = useState(null)\n    const [onProgress, setOnProgress] = useState(false)\n    const [onFinish, setOnFinish] = useState(false)\n\n    useEffect(() => {\n        if (imageFile !== null) {\n            console.log(imageFile)\n        }\n    }, [imageFile])\n\n    useEffect(() => {\n        if (onFinish) {\n            setTimeout(() => {\n                toggle()\n            }, 1000)\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [onFinish])\n\n    useEffect(() => {\n        if (acceptedFiles.length > 0) {\n            acceptedFiles.map((data) => {\n                setImageName(data.name)\n                setImageFile(data)\n                return true\n            })\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [acceptedFiles])\n\n    const upload = () => {\n        setOnProgress(true)\n        const bodyFormData = new FormData()\n        bodyFormData.append(\"file\", imageFile)\n        bodyFormData.append(\"payment_code\", props.paycode)\n        bodyFormData.append(\"type\", \"PREMIUM\")\n\n        doRequest({\n            method: \"POST\",\n            url: \"payment/upload/evidence\",\n            data: bodyFormData,\n        })\n            .then(() => {\n                props.StopTimer()\n                props.RemoveCode()\n                setOnProgress(false)\n                setOnFinish(true)\n            })\n            .catch((er) => {\n                console.log(er)\n            })\n    }\n\n    const toggle = () => {\n        props.toggleModal()\n    }\n\n    const LoadingList = () => {\n        const styling = {\n            width: \"100%\",\n            height: \"100vh\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            fontSize: \"40px\",\n            color: \"white\",\n        }\n        return (\n            <div className=\"onloadList\" style={styling}>\n                <i className=\"fa fa-spin fa-spinner text\" style={{ marginRight: \"10px\" }} />\n                <span className=\"text\">Wait..</span>\n            </div>\n        )\n    }\n\n    const success = () => {\n        const styling = {\n            width: \"100%\",\n            height: \"100vh\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            fontSize: \"40px\",\n        }\n        return (\n            <div className=\"onloadList\" style={styling}>\n                <i className=\"fa fa-check-circle text-success\" style={{ marginRight: \"10px\" }} />\n                <span className=\"text text-success\">Upload Selesai</span>\n            </div>\n        )\n    }\n\n    return (\n        <div className={`container ${isOpen}`}>\n            {onProgress ? (\n                LoadingList()\n            ) : onFinish ? (\n                success()\n            ) : (\n                <div className=\"modal-cos\">\n                    <div className=\"btn-close\" onClick={toggle}>\n                        <i className=\"icon-close\" />\n                    </div>\n                    <div {...getRootProps({ className: \"dropzone\" })}>\n                        <input {...getInputProps()} />\n                        <div className=\"main\">\n                            <div className=\"top\">\n                                <Link to=\"#\" className=\"choose\" onClick={open}>\n                                    <i className=\"fa fa-file i-2x text text-image\" />\n                                    <h3 className=\"text-image\">\n                                        {imageName ? imageName : \"Choose Struck\"}\n                                    </h3>\n                                </Link>\n                            </div>\n                            <div className=\"bot\">\n                                <Link className={`btn btn-Black`} to=\"#\" onClick={upload}>\n                                    <span className=\"text\">Uploads</span>\n                                    <i\n                                        className=\"fa fa-spin fa-spinner text-active\"\n                                        style={{ marginRight: \"10px\" }}\n                                    />\n                                    <span className=\"text-active\">Wait..</span>\n                                </Link>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    )\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        StopTimer: bindActionCreators(times.ResetTimer, dispatch),\n        RemoveCode: bindActionCreators(unsetPayCode, dispatch),\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        users: state.users,\n        tokens: state.users.token,\n        paycode: state.users.paycode,\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Upload)\n"]},"metadata":{},"sourceType":"module"}